
<div fxLayout="column">
	<mat-card matcard class="mat-elevation-z8">
		<mat-card-title>Register User</mat-card-title>
		<br />
		<mat-card *ngIf="errorMessage" class="mat-elevation-z0">
			<mat-card-content>
				<div class="alert alert-danger">
					<div class="msg-error">{{errorMessage}}</div>
				</div>
			</mat-card-content>
		</mat-card>
		<mat-card-content fxLayout="column" fxLayoutGap="10px">

			<mat-horizontal-stepper [linear]="isLinear" #stepper>
				<mat-step fxFlex [stepControl]="contactInformationForm">
					<form id="contactInfo" [formGroup]="contactInformationForm">
						<ng-template matStepLabel>Contact Information</ng-template>
						<mat-list>
							<mat-list-item>
								<mat-form-field fxFlex>
									<input matInput formControlName="firstName" placeholder="First Name" required>
								</mat-form-field>

								<mat-form-field fxFlex>
									<input matInput formControlName="lastName" placeholder="Last Name" required>
								</mat-form-field>

								<mat-form-field fxFlex>
									<input matInput formControlName="address" placeholder="Address" required>
								</mat-form-field>

								<mat-form-field fxFlex>
									<input matInput formControlName="email" placeholder="Email" required>
								</mat-form-field>

								<mat-form-field fxFlex>
									<input matInput formControlName="phoneNumber" placeholder="Phone Number" required>
								</mat-form-field>
							</mat-list-item>
						</mat-list><br /><br />
						<div>
							<button mat-raised-button color="primary" mat-button matStepperNext>Next</button>
						</div>
					</form>
				</mat-step>

				<mat-step fxFlex [stepControl]="securityQuestionsForm">
					<form id="questions" [formGroup]="securityQuestionsForm" #questionsForm="ngForm">
						<ng-template matStepLabel>Security Questions</ng-template>
						<mat-list>
							<mat-list-item>
								<mat-form-field fxFlex>
									<mat-select formControlName="securityQuestion1" placeholder="Security Question">
										<mat-option *ngFor="let question of securityQuestions"
											[value]="question._id">
											{{question.text}}
										</mat-option>
									</mat-select>
								</mat-form-field>

								<mat-form-field fxFlex>
									<input matInput class="padding-left" matInput formControlName="answerToSecurityQuestion1" placeholder="Answer 1">
								</mat-form-field>
							</mat-list-item>

							<mat-list-item>
								<mat-form-field fxFlex>
									<mat-select formControlName="securityQuestion2" placeholder="Security Question">
										<mat-option *ngFor="let question of securityQuestions"
											[value]="question._id">
											{{question.text}}
										</mat-option>
									</mat-select>
								</mat-form-field>
								<mat-form-field fxFlex>
									<input matInput class="padding-left" matInput formControlName="answerToSecurityQuestion2" placeholder="Answer 2">
								</mat-form-field>
							</mat-list-item>

							<mat-list-item>
								<mat-form-field fxFlex>
									<mat-select formControlName="securityQuestion3" placeholder="Security Question">
										<mat-option *ngFor="let question of securityQuestions"
											[value]="question._id">
											{{question.text}}
										</mat-option>
									</mat-select>
								</mat-form-field>
								<mat-form-field fxFlex>
									<input matInput class="padding-left" matInput formControlName="answerToSecurityQuestion3" placeholder="Answer 3">
								</mat-form-field>
							</mat-list-item>
						</mat-list><br /><br />
						<div>
							<button mat-raised-button color="primary" matStepperPrevious>Back</button> &nbsp;
							<button mat-raised-button color="primary" (click)="storeQuestions(questionsForm.value)" mat-button matStepperNext>Next</button>
						</div>
					</form>
				</mat-step>

				<mat-step fxFlex [stepControl]="credentialsForm">
					<form id="credentials" [formGroup]="credentialsForm">
						<ng-template matStepLabel>Credentials</ng-template>
						<mat-list>
							<mat-list-item>
								<mat-form-field fxFlex>
									<input matInput formControlName="username" placeholder="Username" required />
								</mat-form-field>
							</mat-list-item>

							<mat-list-item>
								<mat-form-field fxFlex>
									<input matInput formControlName="password" placeholder="Password" type="password" required />
								</mat-form-field>
							</mat-list-item>
						</mat-list><br /><br />
						<div>
							<button mat-raised-button color="primary" mat-button matStepperPrevious>Back</button> &nbsp;
							<button mat-raised-button color="primary" mat-raised-button (click)="register()" color="primary">Submit</button>
						</div>
					</form>
				</mat-step>

			</mat-horizontal-stepper>
		</mat-card-content>
	</mat-card>
	<div fxFlex></div>
</div>